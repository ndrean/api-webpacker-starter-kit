<https://leonelgalan.com/2020/03/01/rails-api-and-webpacker.html>

```bash
rails new mon-app --api -d postgresql
gem 'webpacker'
rails webpacker:install
rails webpacker:install:react
yarn add html-webpack-plugin html-webpack-harddisk-plugin
```

```js
#/config/webpack/environnment.js
const { environment } = require('@rails/webpacker')

const HtmlWebpackPlugin = require('html-webpack-plugin')
const HtmlWebpackHarddiskPlugin = require('html-webpack-harddisk-plugin')

environment.plugins.append(
  'html',
  new HtmlWebpackPlugin({
    alwaysWriteToDisk: true
  })
)

environment.plugins.append(
  'html-harddisk',
  new HtmlWebpackHarddiskPlugin()
)

module.exports = environment
```

# Setup Rails to Serve the HTML Generated by Webpack

```bash
rails generate controller pages index
```

and change to inherit from `ActionAcontroller::Base` since this is an API app. Then let `:index` render the file generated by Webpack.

```ruby
class PagesController < ActionController::Base
  def index
    render file: 'public/packs/index.html'
  end
end

```

```ruby
Rails.application.routes.draw do
  root 'pages/index'
  get '*path', to: 'pages#index'
end
```
